{"remainingRequest":"/Users/bianchi_dy/Documents/GitHub/MDL_URA/bd-network/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/bianchi_dy/Documents/GitHub/MDL_URA/bd-network/src/components/Network.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/bianchi_dy/Documents/GitHub/MDL_URA/bd-network/src/components/Network.vue","mtime":1606894962124},{"path":"/Users/bianchi_dy/Documents/GitHub/MDL_URA/bd-network/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bianchi_dy/Documents/GitHub/MDL_URA/bd-network/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0IHsganNvbiwgY3N2IH0gZnJvbSAnZDMtZmV0Y2gnCi8vJy4uL2Fzc2V0cy9qcy9teWtleS5qcycKLy8gRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5pbmRleE9mID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2Y7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIm5ldHdvcmsiLAogIHByb3BzOiB7CiAgICBqc29uVVJMOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogKCkgPT4gJ2J1c2luZXNzX2Rlc2NyX3JlbGF0aW9uc2hpcHMuanNvbicKICAgIH0sCgogICAgbGlua0Rpc3RhbmNlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMzAKICAgIH0sCiAgICAvLyBzdmcKICAgIHN2Z1NpemU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0CiAgICAgICAgfTsKICAgICAgfQogICAgfSwKCiAgICBib2R5U3RyZW5ndGg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAtMQogICAgfSwKCiAgICBoZWlnaHQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA4MDAKICAgIH0sCiAgICAKICAgIHdpZHRoOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMTIwMAogICAgfSwKCiAgICBtYXJnaW46IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRvcDogNSwKICAgICAgICAgIHJpZ2h0OiA1LAogICAgICAgICAgYm90dG9tOiA1LAogICAgICAgICAgbGVmdDogNQogICAgICAgIH0KICAgICAgfQogICAgfSAKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiYkJveE1hcmdpbjogMjAsCiAgICAgIHNlbGVjdGlvbjogewogICAgICAgIGxpbmtzOiBbXSwKICAgICAgICBub2RlczogW10KICAgICAgfSwKICAgICAgcGlubmVkOiBbXSwgCiAgICAgIG5vZGVMaXN0OiBbXSwKICAgICAgbGlua0xpc3Q6IFtdLAogICAgICBzdGVwTGlzdDogW10sCiAgICAgIHByb2ZpbGVJbmdyZWRpZW50czogW10sCiAgICAgIGZvcmNlOiBudWxsLAogICAgICB6b29tOiBkMy56b29tKCksCiAgICAgIG5vZGVDb2xvcjogWycjRkZEQTk1JywgJyNGQ0IwNDAnLCAnI0ZGNzYyOScsICcjRTQxNDBGJywgJyM2MTIzNDgnLCAnIzAwNjQyOCcsCiAgICAgICAgICAgICAgICAnIzMzQTg0NCcsICcjQTBCMDM2JywgJyNEMEU4MjAnLCAnI0Q4Q0VDQiddLAogICAgICBibGFja091dDogWycjRkZEQTk1JywgJyNEMEU4MjAnLCAnI0Q4Q0VDQicsICcjRkNCMDQwJ10sCiAgICAgIGhpZ2hsaWdodEZsYXZvcnM6IFtdLAogICAgICBhY3RpdmVOb2RlOiAnRmxhdm9yJywKICAgICAgYWN0aXZlTm9kZUNvbG9yOiAnYmxhY2snLAogICAgICBhY3RpdmVOb2RlUHJvZmlsZTogMywKICAgICAgYWN0aXZlTm9kZVNpZGViYXI6ICdDbGljayBvbiB0aGUgYXJyb3dzIGFib3ZlIHRvIGV4cGxvcmUgY29tbW9uIGZsYXZvdXJzIHRoYXQgYXJlIHBhaXJlZCB3aXRoIGNoaWxpLicsCiAgICAgIGFjdGl2ZU5vZGVWYXJpYW50czogJycsCiAgICAgIGFjdGl2ZU5vZGVTYXVjZXM6IDAsCiAgICAgIGFsbFNhdWNlczogNDUsCiAgICAgIHRyYW5zaXRpb25TcGVlZDogMjAwLAogICAgICBjdXJ2ZXM6IGZhbHNlLAogICAgICBzdGVwcGVyOiAwLAogICAgICBsaW5rU3Ryb2tlOiAnZ3JheScsCiAgICAgIHJhZGl1c1JhbmdlOiBbNSwgNTBdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG5vZGVzKCkgewogICAgICBsZXQgbm9kZXMgPSB0aGlzLm5vZGVMaXN0LnNsaWNlKCk7CiAgICAgIGxldCBub2RlSWRzID0gW107CiAgICAgIG5vZGVzID0gbm9kZXMuZmlsdGVyKG5vZGUgPT4gewogICAgICAgIGlmIChub2RlSWRzLmluZGV4T2Yobm9kZS5pZCkgPT09IC0xKSB7CiAgICAgICAgICBub2RlSWRzLnB1c2gobm9kZS5pZCk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBub2RlczsKICAgIH0sCgogICAgbGlua3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmxpbmtMaXN0OwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBib2R5U3RyZW5ndGg6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmluaXREYXRhKCk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuaW5pdERyYWdUaWNrWm9vbSgpOwogICAgICB9KTsKICAgIH0sCiAgICBsaW5rRGlzdGFuY2U6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmluaXREYXRhKCk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuaW5pdERyYWdUaWNrWm9vbSgpOwogICAgICB9KTsKICAgIH0sCiAgICBub2RlczogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuaW5pdERhdGEoKTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5pbml0RHJhZ1RpY2tab29tKCk7CiAgICAgIH0pOwogICAgfQogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXREYXRhKCk7CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0RGF0YSgpCiAgICB0aGlzLmluaXREcmFnVGlja1pvb20oKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBoaWdobGlnaHRTZWxlY3RpdmUoYWN0aXZlSW5kZXgsIGRlY3JlYXNlT3BhY2l0eSkgewogICAgICAvLyBIaWdobGlnaHQgdGhlIHJpZ2h0IHRoaW5ncwogICAgICAvLyBDaGVjayBpZiBjaGlsaSBvciBvdGhlciBzdGVwcwogICAgICBpZiAoYWN0aXZlSW5kZXggPiAtMSkgewogICAgICAgIGxldCBpbmdyZWRpZW50cyA9IHRoaXMucHJvZmlsZUluZ3JlZGllbnRzW2FjdGl2ZUluZGV4XQogICAgICAgIHRoaXMuaGlnaGxpZ2h0Tm9kZShpbmdyZWRpZW50cywgZmFsc2UsIGZhbHNlLCBkZWNyZWFzZU9wYWNpdHkpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IGhpZ2hsaWdodExpbmtzID0gdGhpcy5zdGVwcGVyID09PSAwID8gdHJ1ZSA6IGZhbHNlCiAgICAgICAgdGhpcy5oaWdobGlnaHROb2RlKGFjdGl2ZU5vZGUsIGhpZ2hsaWdodExpbmtzLCB0cnVlLCBkZWNyZWFzZU9wYWNpdHkpCiAgICAgIH0KCiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICB9LAoKICAgIHVwZGF0ZSgpewogICAgICBkMy5zZWxlY3QoJyNjaGFydCcpLnNlbGVjdCgnc3ZnJykucmVtb3ZlKCkKICAgICAgdGhpcy5zdmcgPSB0aGlzLmdldFN2ZygpCiAgICAgIHRoaXMuZHJhd0NoYXJ0KCkKICAgIH0sCgogICAgZ2V0RGF0YSAoKSB7CiAgICAgIGlmICghdGhpcy5qc29uVVJMKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgcHJvdmlkZSBlaXRoZXIgZGF0YSBvciBqc29uVVJMJykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnByb2Nlc3NKU09OKHRoaXMuanNvblVSTCkKICAgICAgfQogICAgfSwKCiAgICBnZXRTdHJpbmcocm93KSB7CiAgICAgIGxldCBsYWJlbCA9IHJvd1snY291bnRyeSddLmluY2x1ZGVzKCdtZWFuJykgPyAnQXZlcmFnZSB2YWx1ZSBmb3IgJyArIHJvd1snZWxlbWVudCddIDogcm93Wydjb3VudHJ5J10gCiAgICAgIGxldCB2YWx1ZSA9IGxhYmVsICsgJzogJyArIChyb3dbdGhpcy5hY3RpdmVJbmRleF0gPyBNYXRoLnJvdW5kKHJvd1t0aGlzLmFjdGl2ZUluZGV4XSAqIDEwKSAvIDEwIDogJ05JTCcpCiAgICAgIHJldHVybiB2YWx1ZQogICAgfSwKCiAgICBwcm9jZXNzSlNPTiAodXJsKSB7CiAgICAgIGpzb24odXJsKS50aGVuKChkYXRhKSA9PiB7CiAgICAgICAgdGhpcy5saW5rTGlzdCA9IGRhdGEubGlua3MKICAgICAgICB0aGlzLm5vZGVMaXN0ID0gZGF0YS5ub2RlcwoKICAgICAgICB0aGlzLm5vZGVMaXN0LmZvckVhY2goIG5vZGU9PiB7CiAgICAgICAgICBpZiAobm9kZS5wcm9maWxlIGluIHRoaXMucHJvZmlsZUluZ3JlZGllbnRzID09PSBmYWxzZSkgewogICAgICAgICAgICB0aGlzLnByb2ZpbGVJbmdyZWRpZW50c1tub2RlLnByb2ZpbGVdID0gW10KICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnByb2ZpbGVJbmdyZWRpZW50c1tub2RlLnByb2ZpbGVdLnB1c2gobm9kZS5pZCk7CiAgICAgICAgfSkKCiAgICAgICAgdGhpcy5tb3VudCA9IHRydWUKICAgICAgICB0aGlzLnVwZGF0ZSgpCiAgICAgIH0pCiAgICB9LAoKICAgIGdldFN2ZyAoKSB7CiAgICAgIGNvbnN0IHsgc3ZnV2lkdGgsIHN2Z0hlaWdodCB9ID0gdGhpcwogICAgICBjb25zdCB7IG1hcmdpbiB9ID0gdGhpcwoKICAgICAgdGhpcy5zdmdXaWR0aCA9IHRoaXMud2lkdGgKICAgICAgdGhpcy5zdmdIZWlnaHQgPSB0aGlzLmhlaWdodAogICAgICBjb25zdCB3aWR0aCA9IHRoaXMuc3ZnV2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodAogICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLnN2Z0hlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3ZnV2lkdGgsIHRoaXMuc3ZnSGVpZ2h0KQogICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0KCIjY2hhcnQiKS5hcHBlbmQoInN2ZyIpCiAgICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgd2lkdGgpCiAgICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIGhlaWdodCkKICAgICAgICAgICAgICAuYXR0cigiaWQiLCAiY29udGFpbmVyIik7CiAgICAgICAgICAgICAgLy8uY2FsbCh0aGlzLnJlc3BvbnNpdmVmeSk7CgogICAgICByZXR1cm4gc3ZnCiAgICB9LAoKICAgIGRyYXdDaGFydCgpIHsKICAgICAgbGV0IGVkZ2VzIAogICAgICBpZiAodGhpcy5jdXJ2ZXMpIHsKICAgICAgICBlZGdlcyA9IHRoaXMuc3ZnLmFwcGVuZCgiZyIpCiAgICAgICAgICAuc2VsZWN0QWxsKCIubGluayIpCiAgICAgICAgICAuZGF0YSh0aGlzLmxpbmtzKQogICAgICAgICAgLmpvaW4oInBhdGgiKQogICAgICAgICAgLmF0dHIoIm9wYWNpdHkiLCAwLjQpCiAgICAgICAgICAuYXR0cigic3Ryb2tlIiwgdGhpcy5saW5rU3Ryb2tlKQogICAgICAgICAgLmF0dHIoImZpbGwiLCAidHJhbnNwYXJlbnQiKQogICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCkgewogICAgICAgICAgICBsZXQgc291cmNlID0gZC5zb3VyY2Uuc3BsaXQoJyAnKS5qb2luKCcnKS5yZXBsYWNlKC9bXlx3XHNdfF8vZywgIiIpOwogICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZC50YXJnZXQuc3BsaXQoJyAnKS5qb2luKCcnKS5yZXBsYWNlKC9bXlx3XHNdfF8vZywgIiIpOwogICAgICAgICAgICByZXR1cm4gJ2xpbmsgZWxlbWVudCAnICsgc291cmNlICsgJyAnICsgdGFyZ2V0OwogICAgICAgICAgICB9KQogICAgICAgICAgLmF0dHIoJ3N0cm9rZS1saW5lY2FwJywgJ3JvdW5kJykKICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGVkZ2VzID0gdGhpcy5zdmcuYXBwZW5kKCJnIikKICAgICAgICAuc2VsZWN0QWxsKCIubGluayIpCiAgICAgICAgLmRhdGEodGhpcy5saW5rcykKICAgICAgICAuZW50ZXIoKS5hcHBlbmQoImxpbmUiKQogICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgIGxldCBzb3VyY2UgPSBkLnNvdXJjZS5zcGxpdCgnICcpLmpvaW4oJycpLnJlcGxhY2UoL1teXHdcc118Xy9nLCAiIik7CiAgICAgICAgICBsZXQgdGFyZ2V0ID0gZC50YXJnZXQuc3BsaXQoJyAnKS5qb2luKCcnKS5yZXBsYWNlKC9bXlx3XHNdfF8vZywgIiIpOwogICAgICAgICAgcmV0dXJuICdsaW5rIGVsZW1lbnQgJyArIHNvdXJjZSArICcgJyArIHRhcmdldDsKICAgICAgICAgIH0pCiAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjQpCiAgICAgICAgLmF0dHIoJ3N0cm9rZS1saW5lY2FwJywgJ3JvdW5kJykKICAgICAgICAuYXR0cignc3Ryb2tlJywgdGhpcy5saW5rU3Ryb2tlKQogICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzEsIDMyMDBdKS5yYW5nZShbMSwgMzBdKShkLnZhbHVlKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICAgIGxldCBub2RlcyA9IHRoaXMuc3ZnLmFwcGVuZCgiZyIpCiAgICAgICAgLnNlbGVjdEFsbCgiLm5vZGUiKQogICAgICAgIC5kYXRhKHRoaXMubm9kZXMpCiAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdjaXJjbGUnKQogICAgICAgIC5hdHRyKCdpZCcsIChkKSA9PiBkLmluZGV4KQogICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgIGxldCBub2RlQ2xhc3M9JycKICAgICAgICAgIHJldHVybiAnbm9kZSBlbGVtZW50ICcgKyBkLmlkLnNwbGl0KCcgJykuam9pbignJykucmVwbGFjZSgvW15cd1xzXXxfL2csICIiKTsKICAgICAgICAgIH0pCiAgICAgICAgLmF0dHIoJ2ZpbGwnLCAoZCkgPT4gZC5jaGlsZCA9PT0gdHJ1ZSA/ICdzdGVlbGJsdWUnIDogJ2dvbGRlbnJvZCcpCiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICd3aGl0ZScpCiAgICAgICAgLmF0dHIoJ3InLCAoZCkgPT4gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDMwMDBdKS5yYW5nZShbNSwgMzBdKShkLm9jY3VyZW5jZSkpCiAgICAgICAgLm9uKCdtb3VzZW92ZXInLCAoZCwgZSwgbm9kZXMpID0+IHRoaXMubm9kZU1vdXNlb3ZlcihkLCBlLCBub2RlcykpCiAgICAgICAgLm9uKCdtb3VzZW91dCcsIChkLCBlLCBub2RlcykgPT4gdGhpcy5ub2RlTW91c2VvdXQoZCwgZSwgbm9kZXMpKTsKCiAgICAgIGxldCBibGFja091dCA9IHRoaXMuYmxhY2tPdXQKCiAgICAgIC8vIEFkZCBzaW5nbGUgbGluZSB0ZXh0CiAgICAgIC8vIHRoaXMuc3ZnLmFwcGVuZCgiZyIpCiAgICAgIC8vICAgLnNlbGVjdEFsbCgiLnRleHQiKQogICAgICAvLyAgIC5kYXRhKHRoaXMubm9kZXMpCiAgICAgIC8vICAgLmVudGVyKCkKICAgICAgLy8gICAuYXBwZW5kKCd0ZXh0JykKICAgICAgLy8gICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbihkKSB7CiAgICAgIC8vICAgICBsZXQgbm9kZUNsYXNzPScnCiAgICAgIC8vICAgICByZXR1cm4gJ25vZGUtdGV4dCAnICsgZC5pZC5zcGxpdCgnICcpLmpvaW4oJycpLnJlcGxhY2UoL1teXHdcc118Xy9nLCAiIik7CiAgICAgIC8vICAgfSkKICAgICAgLy8gICAudGV4dCgoZCkgPT4gZC5pZCkKICAgICAgLy8gICAuYXR0cignZmlsbCcsIChkKSA9PiB0aGlzLm5vZGVDb2xvcltkWydwcm9maWxlJ11dKQogICAgICAvLyAgIC5hdHRyKCdkeCcsIDApCiAgICAgIC8vICAgLmF0dHIoJ2FsaWdubWVudC1iYXNlbGluZScsICd0ZXh0LXRvcCcpCiAgICAgIC8vICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpCiAgICAgIC8vICAgLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKQogICAgICAvLyAgIC5hdHRyKCdmb250LXNpemUnLCA4KQogICAgICAvLyAgIC5hdHRyKCdvcGFjaXR5JywgMC40KQogICAgICAvLyAgIC5vbignbW91c2VvdmVyJywgKGQsIGUsIG5vZGVzKSA9PiB0aGlzLm5vZGVNb3VzZW92ZXIoZCwgZSwgbm9kZXMpKQogICAgICAvLyAgIC5vbignbW91c2VvdXQnLCAoZCwgZSwgbm9kZXMpID0+IHRoaXMubm9kZU1vdXNlb3V0KGQsIGUsIG5vZGVzKSk7CgogICAgICB0aGlzLmluaXREcmFnVGlja1pvb20oKQogICAgfSwKCiAgICBub2RlTW91c2VvdmVyKGQsIGUsIG5vZGVzKSB7CiAgICAgIGxldCB0YXJnZXROb2RlID0gbm9kZXNbZV0KICAgICAgdGhpcy5hY3RpdmVOb2RlID0gZC5pZAogICAgICB0aGlzLmhpZ2hsaWdodE5vZGUodGhpcy5hY3RpdmVOb2RlLCB0cnVlLCB0cnVlLCB0cnVlKTsKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCgogICAgaGlnaGxpZ2h0Tm9kZShub2RlTmFtZSwgaGlnaGxpZ2h0TGlua3MsIGhpZ2hsaWdodE90aGVycywgZGVjcmVhc2VPcGFjaXR5KXsKICAgICAgbGV0IG5vZGVDbGFzcyA9IFtdCiAgICAgIAogICAgICBpZiAoQXJyYXkuaXNBcnJheShub2RlTmFtZSkpIHsKICAgICAgICBmb3IgKGxldCBpIGluIG5vZGVOYW1lKXsKICAgICAgICAgIG5vZGVDbGFzcy5wdXNoKG5vZGVOYW1lW2ldLnNwbGl0KCcgJykuam9pbignJykucmVwbGFjZSgvW15cd1xzXXxfL2csICIiKSkKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbm9kZUNsYXNzID0gbm9kZU5hbWUuc3BsaXQoJyAnKS5qb2luKCcnKS5yZXBsYWNlKC9bXlx3XHNdfF8vZywgIiIpOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKG5vZGVDbGFzcykKICAgICAgaWYgKGRlY3JlYXNlT3BhY2l0eSkgewogICAgICAgIGxldCBvcGFjaXR5ID0gMC4wNTsKCiAgICAgICAgLy8gRGVjcmVhc2Ugb3BhY2l0eSBmb3IgYWxsIGlycmVsZXZhbnQgbm9kZXMgYW5kIHRoZWlyIHRleHQKICAgICAgICBkMy5zZWxlY3RBbGwoIi5ub2RlLmVsZW1lbnQiKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odGhpcy50cmFuc2l0aW9uU3BlZWQpLnN0eWxlKCJvcGFjaXR5Iiwgb3BhY2l0eSk7CiAgICAgICAgZDMuc2VsZWN0QWxsKCIubm9kZS10ZXh0IikudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRoaXMudHJhbnNpdGlvblNwZWVkKS5zdHlsZSgib3BhY2l0eSIsIG9wYWNpdHkpOwogICAgICB9CgogICAgICAvLyBIaWdobGlnaHQgcmVsZXZhbnQgbm9kZXMgYW5kIHRoZWlyIHRleHQKICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm9kZUNsYXNzKSkgewogICAgICAgIGZvciAobGV0IGkgaW4gbm9kZUNsYXNzKXsKICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm5vZGUuZWxlbWVudC4iK25vZGVDbGFzc1tpXSkudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRoaXMudHJhbnNpdGlvblNwZWVkKS5zdHlsZSgib3BhY2l0eSIsIDEpOwogICAgICAgICAgZDMuc2VsZWN0QWxsKCIubm9kZS10ZXh0LiIrbm9kZUNsYXNzW2ldKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odGhpcy50cmFuc2l0aW9uU3BlZWQpLnN0eWxlKCJvcGFjaXR5IiwgMSkKICAgICAgICAgICAgLmF0dHIoJ2ZvbnQtc2l6ZScsIDEyKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZDMuc2VsZWN0QWxsKCIubm9kZS5lbGVtZW50LiIrbm9kZUNsYXNzKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odGhpcy50cmFuc2l0aW9uU3BlZWQpLnN0eWxlKCJvcGFjaXR5IiwgMSk7CiAgICAgICAgZDMuc2VsZWN0QWxsKCIubm9kZS10ZXh0LiIrbm9kZUNsYXNzKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odGhpcy50cmFuc2l0aW9uU3BlZWQpLnN0eWxlKCJvcGFjaXR5IiwgMSkKICAgICAgICAgIC5hdHRyKCdmb250LXNpemUnLCAxMik7CiAgICAgIH0KCiAgICAgIC8vIEFwcGxpY2FibGUgb25seSB0byBtb3VzZSBpbnRlcmFjdGlvbnMsIGFuZCBOT1QgdG8gc3RlcHBlcgogICAgICBpZiAoaGlnaGxpZ2h0T3RoZXJzKSB7CiAgICAgICAgbGV0IG90aGVyTm9kZXMgPSB0aGlzLmlkZW50aWZ5VGFyZ2V0cyhub2RlTmFtZSk7CiAgICAgICAgb3RoZXJOb2Rlcy5mb3JFYWNoKG5vZGUgPT4gewogICAgICAgICAgZDMuc2VsZWN0QWxsKCIubm9kZS5lbGVtZW50LiIrIG5vZGUpLnRyYW5zaXRpb24oKS5kdXJhdGlvbih0aGlzLnRyYW5zaXRpb25TcGVlZCkuc3R5bGUoIm9wYWNpdHkiLCAxKTsKICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm5vZGUtdGV4dC4iKyBub2RlKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odGhpcy50cmFuc2l0aW9uU3BlZWQpLnN0eWxlKCJvcGFjaXR5IiwgMSkKICAgICAgICAgICAgLmF0dHIoJ2ZvbnQtc2l6ZScsIDEyKTsKICAgICAgICB9KQogICAgICB9CiAgICAgIAogICAgICBpZiAoZGVjcmVhc2VPcGFjaXR5KSB7CiAgICAgICAgLy8gRGVjcmVhc2Ugb3BhY2l0eSBvZiBpcnJlbGV2YW50IGxpbmtzCiAgICAgICAgZDMuc2VsZWN0QWxsKCIubGluay5lbGVtZW50IikudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRoaXMudHJhbnNpdGlvblNwZWVkKS5zdHlsZSgib3BhY2l0eSIsIDAuMDEpOwogICAgICB9CgogICAgICAvLyBIaWdsaWdodCBsaW5rcwogICAgICBpZiAoaGlnaGxpZ2h0TGlua3MpIHsKICAgICAgICBsZXQgc291cmNlID0gbm9kZU5hbWUuc3BsaXQoJyAnKS5qb2luKCcnKS5yZXBsYWNlKC9bXlx3XHNdfF8vZywgIiIpCiAgICAgICAgbGV0IHNvdXJjZUNsYXNzID0gIi5saW5rLmVsZW1lbnQuIiArIHNvdXJjZQogICAgICAgIGNvbnNvbGUubG9nKHNvdXJjZSkKICAgICAgICBkMy5zZWxlY3RBbGwoc291cmNlQ2xhc3MpLnRyYW5zaXRpb24oKS5kdXJhdGlvbih0aGlzLnRyYW5zaXRpb25TcGVlZCkuc3R5bGUoIm9wYWNpdHkiLCAwLjQpOwogICAgICB9CiAgICB9LAoKICAgIGlkZW50aWZ5VGFyZ2V0cyhub2RlTmFtZSkgewogICAgICBsZXQgdGFyZ2V0Tm9kZXMgPSBbXQogICAgICBsZXQgY291bnQgPSAwCiAgICAgIHRoaXMubGlua3MuZm9yRWFjaChsaW5rID0+IHsKICAgICAgICBpZiAobGluay5zb3VyY2UuaWQgPT09IG5vZGVOYW1lIHx8IGxpbmsudGFyZ2V0LmlkID09PSBub2RlTmFtZSl7CiAgICAgICAgICBjb3VudCs9MTsKICAgICAgICB9CiAgICAgICAgaWYgKGxpbmsuc291cmNlLmlkID09PSBub2RlTmFtZSkgewogICAgICAgICAgdGFyZ2V0Tm9kZXMucHVzaChsaW5rLnRhcmdldC5pZC5zcGxpdCgnICcpLmpvaW4oJycpLnJlcGxhY2UoL1teXHdcc118Xy9nLCAiIikpOwogICAgICAgIH0gCiAgICAgICAgCiAgICAgICAgaWYgKGxpbmsudGFyZ2V0LmlkID09PSBub2RlTmFtZSkgewogICAgICAgICAgdGFyZ2V0Tm9kZXMucHVzaChsaW5rLnNvdXJjZS5pZC5zcGxpdCgnICcpLmpvaW4oJycpLnJlcGxhY2UoL1teXHdcc118Xy9nLCAiIikpOwogICAgICAgIH0KICAgICAgfSkKICAgICAgcmV0dXJuIHRhcmdldE5vZGVzCiAgICB9LAoKICAgIG5vZGVNb3VzZW91dChkLCBlLCBub2RlcykgewogICAgICB0aGlzLm5vU2VsZWN0ZWRTdGF0ZShlKTsKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCgogICAgbm9TZWxlY3RlZFN0YXRlKCkgewogICAgICBkMy5zZWxlY3RBbGwoIi5ub2RlLmVsZW1lbnQiKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odGhpcy50cmFuc2l0aW9uU3BlZWQpLnN0eWxlKCJvcGFjaXR5IiwgMSk7CiAgICAgIGQzLnNlbGVjdEFsbCgiLmxpbmsuZWxlbWVudCIpLnRyYW5zaXRpb24oKS5kdXJhdGlvbih0aGlzLnRyYW5zaXRpb25TcGVlZCkuc3R5bGUoIm9wYWNpdHkiLCAwLjQpOwogICAgICBkMy5zZWxlY3RBbGwoIi5ub2RlLXRleHQiKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odGhpcy50cmFuc2l0aW9uU3BlZWQpLnN0eWxlKCJvcGFjaXR5IiwgMC40KS5hdHRyKCdmb250LXNpemUnLCA4KTsKICAgIH0sCgogICAgcmVzcG9uc2l2ZWZ5KHN2ZykgewogICAgICAvLyBnZXQgY29udGFpbmVyICsgc3ZnIGFzcGVjdCByYXRpbwogICAgICB2YXIgY29udGFpbmVyID0gZDMuc2VsZWN0KHN2Zy5ub2RlKCkucGFyZW50Tm9kZSksCiAgICAgICAgICB3aWR0aCA9IHBhcnNlSW50KHN2Zy5zdHlsZSgid2lkdGgiKSksCiAgICAgICAgICBoZWlnaHQgPSBwYXJzZUludChzdmcuc3R5bGUoImhlaWdodCIpKSwKICAgICAgICAgIGFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0OwoKICAgICAgLy8gYWRkIHZpZXdCb3ggYW5kIHByZXNlcnZlQXNwZWN0UmF0aW8gcHJvcGVydGllcywKICAgICAgLy8gYW5kIGNhbGwgcmVzaXplIHNvIHRoYXQgc3ZnIHJlc2l6ZXMgb24gaW5pdGFsIHBhZ2UgbG9hZAogICAgICBzdmcuYXR0cigidmlld0JveCIsICIwIDAgIiArIHdpZHRoICsgIiAiICsgaGVpZ2h0KQogICAgICAgICAgLy8uYXR0cigicGVyc2VydmVBc3BlY3RSYXRpbyIsICJ4TWluWU1pZCIpCiAgICAgICAgICAuY2FsbChyZXNpemUpOwoKICAgICAgLy8gdG8gcmVnaXN0ZXIgbXVsdGlwbGUgbGlzdGVuZXJzIGZvciBzYW1lIGV2ZW50IHR5cGUsIAogICAgICAvLyB5b3UgbmVlZCB0byBhZGQgbmFtZXNwYWNlLCBpLmUuLCAnY2xpY2suZm9vJwogICAgICAvLyBuZWNlc3NhcnkgaWYgeW91IGNhbGwgaW52b2tlIHRoaXMgZnVuY3Rpb24gZm9yIG11bHRpcGxlIHN2Z3MKICAgICAgLy8gYXBpIGRvY3M6IGh0dHBzOi8vZ2l0aHViLmNvbS9tYm9zdG9jay9kMy93aWtpL1NlbGVjdGlvbnMjb24KICAgICAgZDMuc2VsZWN0KHdpbmRvdykub24oInJlc2l6ZS4iICsgY29udGFpbmVyLmF0dHIoImlkIiksIHJlc2l6ZSk7CgogICAgICAvLyBnZXQgd2lkdGggb2YgY29udGFpbmVyIGFuZCByZXNpemUgc3ZnIHRvIGZpdCBpdAogICAgICBmdW5jdGlvbiByZXNpemUoKSB7CiAgICAgICAgICB2YXIgdGFyZ2V0V2lkdGggPSBwYXJzZUludChjb250YWluZXIuc3R5bGUoIndpZHRoIikpID4gMTAwMCA/IDEwMDAgOiBwYXJzZUludChjb250YWluZXIuc3R5bGUoIndpZHRoIikpOwogICAgICAgICAgdmFyIHRhcmdldEhlaWdodCA9IE1hdGgucm91bmQodGFyZ2V0V2lkdGggLyBhc3BlY3QpOwogICAgICAgICAgc3ZnLmF0dHIoIndpZHRoIiwgdGFyZ2V0V2lkdGgpOwogICAgICAgICAgc3ZnLmF0dHIoImhlaWdodCIsIHRhcmdldEhlaWdodCk7CiAgICAgIH0KICAgIH0sCgogICAgaW5pdERhdGEoKSB7CiAgICAgIHRoaXMuZm9yY2UgPSBkMwogICAgICAgIC5mb3JjZVNpbXVsYXRpb24odGhpcy5ub2RlcykKICAgICAgICAuZm9yY2UoCiAgICAgICAgICAibGluayIsCiAgICAgICAgICBkMy5mb3JjZUxpbmsodGhpcy5saW5rcykKICAgICAgICAgICAgLmlkKGQgPT4gZC5pZCkKICAgICAgICAgICAgLmRpc3RhbmNlKDEwMCkKICAgICAgICApCiAgICAgICAgLmZvcmNlKCJjaGFyZ2UiLCBkMy5mb3JjZU1hbnlCb2R5KCkuZGlzdGFuY2VNYXgoNDApLnN0cmVuZ3RoKDUwKSkgLy9UaGUgc3RyZW5ndGggb2YgdGhlIGF0dHJhY3Rpb24gb3IgcmVwdWxzaW9uCiAgICAgICAgLmZvcmNlKCdjb2xsaXNpb24nLCBkMy5mb3JjZUNvbGxpZGUoKS5yYWRpdXMoZnVuY3Rpb24oZCkgewogICAgICAgICAgcmV0dXJuIGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCAzMDAwXSkucmFuZ2UoWzUsIDEwMF0pKGQub2NjdXJlbmNlKSArIDEKICAgICAgICB9KSkKICAgICAgICAuZm9yY2UoCiAgICAgICAgICAiY2VudGVyIiwKICAgICAgICAgIGQzLmZvcmNlQ2VudGVyKHRoaXMuc3ZnV2lkdGgvMiwgdGhpcy5zdmdIZWlnaHQvMikKICAgICAgICApCiAgICAgICAgLnZlbG9jaXR5RGVjYXkoMC4xKTsKICAgIH0sCgogICAgaW5pdERyYWdUaWNrWm9vbSgpIHsKICAgICAgZDMuc2VsZWN0QWxsKCIubm9kZSIpLmNhbGwodGhpcy5kcmFnKHRoaXMuZm9yY2UpKTsKCiAgICAgIHRoaXMuZm9yY2Uub24oInRpY2siLCAoKSA9PiB7CiAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm5vZGUiKQogICAgICAgICAgLmRhdGEodGhpcy5ub2RlcykKICAgICAgICAgIC5hdHRyKCdjeCcsIGQ9PiBkLngpCiAgICAgICAgICAuYXR0cignY3knLCBkPT4gZC55KTsKICAgICAgICAgIC8vIC5hdHRyKCJjeCIsIGQgPT4gewogICAgICAgICAgLy8gICBsZXQgcmFkaXVzID0gIGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFsxLCAxNzAwXSkucmFuZ2UoWzUsIDIwXSkoZC5vY2N1cmVuY2UpCiAgICAgICAgICAvLyAgIGxldCBuZXdYID0gTWF0aC5tYXgocmFkaXVzLCBNYXRoLm1pbih0aGlzLndpZHRoIC0gdGhpcy5iYkJveE1hcmdpbiAtIHJhZGl1cywgZC54KSk7CiAgICAgICAgICAvLyAgIHJldHVybiBuZXdYCiAgICAgICAgICAvLyB9KQogICAgICAgICAgLy8gLmF0dHIoImN5IiwgZCA9PiB7CiAgICAgICAgICAvLyAgIGxldCByYWRpdXMgPSAgZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzEsIDE3MDBdKS5yYW5nZShbNSwgMjBdKShkLm9jY3VyZW5jZSkKICAgICAgICAgIC8vICAgbGV0IG5ld1kgPSBNYXRoLm1heChyYWRpdXMsIE1hdGgubWluKHRoaXMuaGVpZ2h0IC0gdGhpcy5iYkJveE1hcmdpbiAtIHJhZGl1cywgZC55KSk7CiAgICAgICAgICAvLyAgIHJldHVybiBuZXdZCiAgICAgICAgICAvLyB9KTsKCiAgICAgICAgZDMuc2VsZWN0QWxsKCIubm9kZS10ZXh0IikKICAgICAgICAgIC5kYXRhKHRoaXMubm9kZXMpCiAgICAgICAgICAuYXR0cigneCcsIGQ9PiBkLngpCiAgICAgICAgICAuYXR0cigneScsIGQ9PiBkLnkpOwogICAgICAgICAgLy8gLmF0dHIoIngiLCBkID0+IHsKICAgICAgICAgIC8vICAgbGV0IHJhZGl1cyA9ICBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMSwgMTcwMF0pLnJhbmdlKFs1LCAyMF0pKGQub2NjdXJlbmNlKQogICAgICAgICAgLy8gICBsZXQgbmV3WCA9IE1hdGgubWF4KHJhZGl1cywgTWF0aC5taW4odGhpcy53aWR0aCAtIHRoaXMuYmJCb3hNYXJnaW4gLSByYWRpdXMsIGQueCkpOwogICAgICAgICAgLy8gICByZXR1cm4gbmV3WAogICAgICAgICAgLy8gfSkKICAgICAgICAgIC8vIC5hdHRyKCJ5IiwgZCA9PiB7CiAgICAgICAgICAvLyAgIGxldCByYWRpdXMgPSAgZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzEsIDE3MDBdKS5yYW5nZShbNSwgMjBdKShkLm9jY3VyZW5jZSkKICAgICAgICAgIC8vICAgbGV0IG5ld1kgPSBNYXRoLm1heChyYWRpdXMsIE1hdGgubWluKHRoaXMuaGVpZ2h0IC0gdGhpcy5iYkJveE1hcmdpbiAtIHJhZGl1cywgZC55KSk7CiAgICAgICAgICAvLyAgIHJldHVybiBuZXdZCiAgICAgICAgICAvLyB9KTsKCiAgICAgICAgaWYgKHRoaXMuY3VydmVzKSB7CiAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5saW5rIikKICAgICAgICAgIC5kYXRhKHRoaXMubGlua3MpCiAgICAgICAgICAuYXR0cignZCcsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIGxldCBkeCA9IGQudGFyZ2V0LnggLSBkLnNvdXJjZS54OwogICAgICAgICAgICBsZXQgZHkgPSBkLnRhcmdldC55IC0gZC5zb3VyY2UueTsKICAgICAgICAgICAgbGV0IGRyID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTsKICAgICAgICAgICAgcmV0dXJuICJNIiArIGQuc291cmNlLnggKyAiLCIgKyBkLnNvdXJjZS55ICsgIkEiICsgZHIgKyAiLCIgKyBkciArICIgMSAwLDEgIiArIGQudGFyZ2V0LnggKyAiLCIgKyBkLnRhcmdldC55OwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLmxpbmsiKQogICAgICAgICAgLmRhdGEodGhpcy5saW5rcykKICAgICAgICAgIC5hdHRyKCJ4MSIsIGQgPT4gZC5zb3VyY2UueCkKICAgICAgICAgIC5hdHRyKCJ5MSIsIGQgPT4gZC5zb3VyY2UueSkKICAgICAgICAgIC5hdHRyKCJ4MiIsIGQgPT4gZC50YXJnZXQueCkKICAgICAgICAgIC5hdHRyKCJ5MiIsIGQgPT4gZC50YXJnZXQueSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgCiAgICAgIH0pOwogICAgfSwKCiAgICBkcmFnKHNpbXVsYXRpb24pIHsKICAgICAgZnVuY3Rpb24gZHJhZ3N0YXJ0ZWQoZCkgewogICAgICAgIGlmICghZDMuZXZlbnQuYWN0aXZlKSBzaW11bGF0aW9uLmFscGhhVGFyZ2V0KDAuMikucmVzdGFydCgpOwogICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdmaXhlZCcsIGQuZml4ZWQgPSB0cnVlKTsKICAgICAgICBkLmZ4ID0gZC54OwogICAgICAgIGQuZnkgPSBkLnk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGRyYWdnZWQoZCkgewogICAgICAgIGQuZnggPSBkMy5ldmVudC54OwogICAgICAgIGQuZnkgPSBkMy5ldmVudC55OwogICAgICB9CgogICAgICBmdW5jdGlvbiBkcmFnZW5kZWQoZCkgewogICAgICAgIGlmICghZDMuZXZlbnQuYWN0aXZlKSBzaW11bGF0aW9uLmFscGhhVGFyZ2V0KDApOwogICAgICAgIGQuZnggPSBudWxsOwogICAgICAgIGQuZnkgPSBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gZDMKICAgICAgICAuZHJhZygpCiAgICAgICAgLm9uKCJzdGFydCIsIGRyYWdzdGFydGVkKQogICAgICAgIC5vbigiZHJhZyIsIGRyYWdnZWQpCiAgICAgICAgLm9uKCJlbmQiLCBkcmFnZW5kZWQpOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["Network.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Network.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"app\" class=\"flex flex-col p-4\" >\n    <div id=\"chart\" class=\"justify-center flex my-1 border border-gray-400\"> \n    </div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport { json, csv } from 'd3-fetch'\n//'../assets/js/mykey.js'\n// DOMTokenList.prototype.indexOf = Array.prototype.indexOf;\n\nexport default {\n  name: \"network\",\n  props: {\n    jsonURL: {\n      type: String,\n      default: () => 'business_descr_relationships.json'\n    },\n\n    linkDistance: {\n      type: Number,\n      default: 30\n    },\n    // svg\n    svgSize: {\n      type: Object,\n      default: () => {\n        return {\n          width: window.innerWidth,\n          height: window.innerHeight\n        };\n      }\n    },\n\n    bodyStrength: {\n      type: Number,\n      default: -1\n    },\n\n    height: {\n      type: Number,\n      default: 800\n    },\n    \n    width: {\n      type: Number,\n      default: 1200\n    },\n\n    margin: {\n      type: Object,\n      default: function () {\n        return {\n          top: 5,\n          right: 5,\n          bottom: 5,\n          left: 5\n        }\n      }\n    } \n  },\n  data() {\n    return {\n      bbBoxMargin: 20,\n      selection: {\n        links: [],\n        nodes: []\n      },\n      pinned: [], \n      nodeList: [],\n      linkList: [],\n      stepList: [],\n      profileIngredients: [],\n      force: null,\n      zoom: d3.zoom(),\n      nodeColor: ['#FFDA95', '#FCB040', '#FF7629', '#E4140F', '#612348', '#006428',\n                '#33A844', '#A0B036', '#D0E820', '#D8CECB'],\n      blackOut: ['#FFDA95', '#D0E820', '#D8CECB', '#FCB040'],\n      highlightFlavors: [],\n      activeNode: 'Flavor',\n      activeNodeColor: 'black',\n      activeNodeProfile: 3,\n      activeNodeSidebar: 'Click on the arrows above to explore common flavours that are paired with chili.',\n      activeNodeVariants: '',\n      activeNodeSauces: 0,\n      allSauces: 45,\n      transitionSpeed: 200,\n      curves: false,\n      stepper: 0,\n      linkStroke: 'gray',\n      radiusRange: [5, 50]\n    };\n  },\n  computed: {\n    nodes() {\n      let nodes = this.nodeList.slice();\n      let nodeIds = [];\n      nodes = nodes.filter(node => {\n        if (nodeIds.indexOf(node.id) === -1) {\n          nodeIds.push(node.id);\n          return true;\n        } else {\n          return false;\n        }\n      });\n      return nodes;\n    },\n\n    links() {\n      return this.linkList;\n    },\n  },\n  watch: {\n    bodyStrength: function() {\n      this.initData();\n      this.$nextTick(function() {\n        this.initDragTickZoom();\n      });\n    },\n    linkDistance: function() {\n      this.initData();\n      this.$nextTick(function() {\n        this.initDragTickZoom();\n      });\n    },\n    nodes: function() {\n      this.initData();\n      this.$nextTick(function() {\n        this.initDragTickZoom();\n      });\n    }\n  },\n\n  created() {\n    this.initData();\n  },\n\n  mounted() {\n    this.getData()\n    this.initDragTickZoom();\n  },\n\n  methods: {\n    highlightSelective(activeIndex, decreaseOpacity) {\n      // Highlight the right things\n      // Check if chili or other steps\n      if (activeIndex > -1) {\n        let ingredients = this.profileIngredients[activeIndex]\n        this.highlightNode(ingredients, false, false, decreaseOpacity)\n      } else {\n        let highlightLinks = this.stepper === 0 ? true : false\n        this.highlightNode(activeNode, highlightLinks, true, decreaseOpacity)\n      }\n\n      this.$forceUpdate();\n    },\n\n    update(){\n      d3.select('#chart').select('svg').remove()\n      this.svg = this.getSvg()\n      this.drawChart()\n    },\n\n    getData () {\n      if (!this.jsonURL) {\n        throw new Error('Please provide either data or jsonURL')\n      } else {\n        this.processJSON(this.jsonURL)\n      }\n    },\n\n    getString(row) {\n      let label = row['country'].includes('mean') ? 'Average value for ' + row['element'] : row['country'] \n      let value = label + ': ' + (row[this.activeIndex] ? Math.round(row[this.activeIndex] * 10) / 10 : 'NIL')\n      return value\n    },\n\n    processJSON (url) {\n      json(url).then((data) => {\n        this.linkList = data.links\n        this.nodeList = data.nodes\n\n        this.nodeList.forEach( node=> {\n          if (node.profile in this.profileIngredients === false) {\n            this.profileIngredients[node.profile] = []\n          }\n\n          this.profileIngredients[node.profile].push(node.id);\n        })\n\n        this.mount = true\n        this.update()\n      })\n    },\n\n    getSvg () {\n      const { svgWidth, svgHeight } = this\n      const { margin } = this\n\n      this.svgWidth = this.width\n      this.svgHeight = this.height\n      const width = this.svgWidth + margin.left + margin.right\n      const height = this.svgHeight + margin.top + margin.bottom\n      console.log(this.svgWidth, this.svgHeight)\n      let svg = d3.select(\"#chart\").append(\"svg\")\n              .attr(\"width\", width)\n              .attr(\"height\", height)\n              .attr(\"id\", \"container\");\n              //.call(this.responsivefy);\n\n      return svg\n    },\n\n    drawChart() {\n      let edges \n      if (this.curves) {\n        edges = this.svg.append(\"g\")\n          .selectAll(\".link\")\n          .data(this.links)\n          .join(\"path\")\n          .attr(\"opacity\", 0.4)\n          .attr(\"stroke\", this.linkStroke)\n          .attr(\"fill\", \"transparent\")\n          .attr('class', function(d) {\n            let source = d.source.split(' ').join('').replace(/[^\\w\\s]|_/g, \"\");\n            let target = d.target.split(' ').join('').replace(/[^\\w\\s]|_/g, \"\");\n            return 'link element ' + source + ' ' + target;\n            })\n          .attr('stroke-linecap', 'round')\n          .attr('stroke-width', function (d) {\n            return 1;\n          });\n      } else {\n        edges = this.svg.append(\"g\")\n        .selectAll(\".link\")\n        .data(this.links)\n        .enter().append(\"line\")\n        .attr('class', function(d) {\n          let source = d.source.split(' ').join('').replace(/[^\\w\\s]|_/g, \"\");\n          let target = d.target.split(' ').join('').replace(/[^\\w\\s]|_/g, \"\");\n          return 'link element ' + source + ' ' + target;\n          })\n        .attr('opacity', 0.4)\n        .attr('stroke-linecap', 'round')\n        .attr('stroke', this.linkStroke)\n        .attr('stroke-width', function (d) {\n            return d3.scaleLinear().domain([1, 3200]).range([1, 30])(d.value);\n          });\n      }\n      let nodes = this.svg.append(\"g\")\n        .selectAll(\".node\")\n        .data(this.nodes)\n        .enter().append('circle')\n        .attr('id', (d) => d.index)\n        .attr('class', function(d) {\n          let nodeClass=''\n          return 'node element ' + d.id.split(' ').join('').replace(/[^\\w\\s]|_/g, \"\");\n          })\n        .attr('fill', (d) => d.child === true ? 'steelblue' : 'goldenrod')\n        .attr('stroke', 'white')\n        .attr('r', (d) => d3.scaleLinear().domain([0, 3000]).range([5, 30])(d.occurence))\n        .on('mouseover', (d, e, nodes) => this.nodeMouseover(d, e, nodes))\n        .on('mouseout', (d, e, nodes) => this.nodeMouseout(d, e, nodes));\n\n      let blackOut = this.blackOut\n\n      // Add single line text\n      // this.svg.append(\"g\")\n      //   .selectAll(\".text\")\n      //   .data(this.nodes)\n      //   .enter()\n      //   .append('text')\n      //   .attr('class', function(d) {\n      //     let nodeClass=''\n      //     return 'node-text ' + d.id.split(' ').join('').replace(/[^\\w\\s]|_/g, \"\");\n      //   })\n      //   .text((d) => d.id)\n      //   .attr('fill', (d) => this.nodeColor[d['profile']])\n      //   .attr('dx', 0)\n      //   .attr('alignment-baseline', 'text-top')\n      //   .attr('text-anchor', 'middle')\n      //   .attr('fill', 'black')\n      //   .attr('font-size', 8)\n      //   .attr('opacity', 0.4)\n      //   .on('mouseover', (d, e, nodes) => this.nodeMouseover(d, e, nodes))\n      //   .on('mouseout', (d, e, nodes) => this.nodeMouseout(d, e, nodes));\n\n      this.initDragTickZoom()\n    },\n\n    nodeMouseover(d, e, nodes) {\n      let targetNode = nodes[e]\n      this.activeNode = d.id\n      this.highlightNode(this.activeNode, true, true, true);\n      this.$forceUpdate();\n    },\n\n    highlightNode(nodeName, highlightLinks, highlightOthers, decreaseOpacity){\n      let nodeClass = []\n      \n      if (Array.isArray(nodeName)) {\n        for (let i in nodeName){\n          nodeClass.push(nodeName[i].split(' ').join('').replace(/[^\\w\\s]|_/g, \"\"))\n        }\n      } else {\n        nodeClass = nodeName.split(' ').join('').replace(/[^\\w\\s]|_/g, \"\");\n      }\n      console.log(nodeClass)\n      if (decreaseOpacity) {\n        let opacity = 0.05;\n\n        // Decrease opacity for all irrelevant nodes and their text\n        d3.selectAll(\".node.element\").transition().duration(this.transitionSpeed).style(\"opacity\", opacity);\n        d3.selectAll(\".node-text\").transition().duration(this.transitionSpeed).style(\"opacity\", opacity);\n      }\n\n      // Highlight relevant nodes and their text\n      if (Array.isArray(nodeClass)) {\n        for (let i in nodeClass){\n          d3.selectAll(\".node.element.\"+nodeClass[i]).transition().duration(this.transitionSpeed).style(\"opacity\", 1);\n          d3.selectAll(\".node-text.\"+nodeClass[i]).transition().duration(this.transitionSpeed).style(\"opacity\", 1)\n            .attr('font-size', 12);\n        }\n      } else {\n        d3.selectAll(\".node.element.\"+nodeClass).transition().duration(this.transitionSpeed).style(\"opacity\", 1);\n        d3.selectAll(\".node-text.\"+nodeClass).transition().duration(this.transitionSpeed).style(\"opacity\", 1)\n          .attr('font-size', 12);\n      }\n\n      // Applicable only to mouse interactions, and NOT to stepper\n      if (highlightOthers) {\n        let otherNodes = this.identifyTargets(nodeName);\n        otherNodes.forEach(node => {\n          d3.selectAll(\".node.element.\"+ node).transition().duration(this.transitionSpeed).style(\"opacity\", 1);\n          d3.selectAll(\".node-text.\"+ node).transition().duration(this.transitionSpeed).style(\"opacity\", 1)\n            .attr('font-size', 12);\n        })\n      }\n      \n      if (decreaseOpacity) {\n        // Decrease opacity of irrelevant links\n        d3.selectAll(\".link.element\").transition().duration(this.transitionSpeed).style(\"opacity\", 0.01);\n      }\n\n      // Higlight links\n      if (highlightLinks) {\n        let source = nodeName.split(' ').join('').replace(/[^\\w\\s]|_/g, \"\")\n        let sourceClass = \".link.element.\" + source\n        console.log(source)\n        d3.selectAll(sourceClass).transition().duration(this.transitionSpeed).style(\"opacity\", 0.4);\n      }\n    },\n\n    identifyTargets(nodeName) {\n      let targetNodes = []\n      let count = 0\n      this.links.forEach(link => {\n        if (link.source.id === nodeName || link.target.id === nodeName){\n          count+=1;\n        }\n        if (link.source.id === nodeName) {\n          targetNodes.push(link.target.id.split(' ').join('').replace(/[^\\w\\s]|_/g, \"\"));\n        } \n        \n        if (link.target.id === nodeName) {\n          targetNodes.push(link.source.id.split(' ').join('').replace(/[^\\w\\s]|_/g, \"\"));\n        }\n      })\n      return targetNodes\n    },\n\n    nodeMouseout(d, e, nodes) {\n      this.noSelectedState(e);\n      this.$forceUpdate();\n    },\n\n    noSelectedState() {\n      d3.selectAll(\".node.element\").transition().duration(this.transitionSpeed).style(\"opacity\", 1);\n      d3.selectAll(\".link.element\").transition().duration(this.transitionSpeed).style(\"opacity\", 0.4);\n      d3.selectAll(\".node-text\").transition().duration(this.transitionSpeed).style(\"opacity\", 0.4).attr('font-size', 8);\n    },\n\n    responsivefy(svg) {\n      // get container + svg aspect ratio\n      var container = d3.select(svg.node().parentNode),\n          width = parseInt(svg.style(\"width\")),\n          height = parseInt(svg.style(\"height\")),\n          aspect = width / height;\n\n      // add viewBox and preserveAspectRatio properties,\n      // and call resize so that svg resizes on inital page load\n      svg.attr(\"viewBox\", \"0 0 \" + width + \" \" + height)\n          //.attr(\"perserveAspectRatio\", \"xMinYMid\")\n          .call(resize);\n\n      // to register multiple listeners for same event type, \n      // you need to add namespace, i.e., 'click.foo'\n      // necessary if you call invoke this function for multiple svgs\n      // api docs: https://github.com/mbostock/d3/wiki/Selections#on\n      d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n      // get width of container and resize svg to fit it\n      function resize() {\n          var targetWidth = parseInt(container.style(\"width\")) > 1000 ? 1000 : parseInt(container.style(\"width\"));\n          var targetHeight = Math.round(targetWidth / aspect);\n          svg.attr(\"width\", targetWidth);\n          svg.attr(\"height\", targetHeight);\n      }\n    },\n\n    initData() {\n      this.force = d3\n        .forceSimulation(this.nodes)\n        .force(\n          \"link\",\n          d3.forceLink(this.links)\n            .id(d => d.id)\n            .distance(100)\n        )\n        .force(\"charge\", d3.forceManyBody().distanceMax(40).strength(50)) //The strength of the attraction or repulsion\n        .force('collision', d3.forceCollide().radius(function(d) {\n          return d3.scaleLinear().domain([0, 3000]).range([5, 100])(d.occurence) + 1\n        }))\n        .force(\n          \"center\",\n          d3.forceCenter(this.svgWidth/2, this.svgHeight/2)\n        )\n        .velocityDecay(0.1);\n    },\n\n    initDragTickZoom() {\n      d3.selectAll(\".node\").call(this.drag(this.force));\n\n      this.force.on(\"tick\", () => {\n         d3.selectAll(\".node\")\n          .data(this.nodes)\n          .attr('cx', d=> d.x)\n          .attr('cy', d=> d.y);\n          // .attr(\"cx\", d => {\n          //   let radius =  d3.scaleLinear().domain([1, 1700]).range([5, 20])(d.occurence)\n          //   let newX = Math.max(radius, Math.min(this.width - this.bbBoxMargin - radius, d.x));\n          //   return newX\n          // })\n          // .attr(\"cy\", d => {\n          //   let radius =  d3.scaleLinear().domain([1, 1700]).range([5, 20])(d.occurence)\n          //   let newY = Math.max(radius, Math.min(this.height - this.bbBoxMargin - radius, d.y));\n          //   return newY\n          // });\n\n        d3.selectAll(\".node-text\")\n          .data(this.nodes)\n          .attr('x', d=> d.x)\n          .attr('y', d=> d.y);\n          // .attr(\"x\", d => {\n          //   let radius =  d3.scaleLinear().domain([1, 1700]).range([5, 20])(d.occurence)\n          //   let newX = Math.max(radius, Math.min(this.width - this.bbBoxMargin - radius, d.x));\n          //   return newX\n          // })\n          // .attr(\"y\", d => {\n          //   let radius =  d3.scaleLinear().domain([1, 1700]).range([5, 20])(d.occurence)\n          //   let newY = Math.max(radius, Math.min(this.height - this.bbBoxMargin - radius, d.y));\n          //   return newY\n          // });\n\n        if (this.curves) {\n          d3.selectAll(\".link\")\n          .data(this.links)\n          .attr('d', function (d) {\n            let dx = d.target.x - d.source.x;\n            let dy = d.target.y - d.source.y;\n            let dr = Math.sqrt(dx * dx + dy * dy);\n            return \"M\" + d.source.x + \",\" + d.source.y + \"A\" + dr + \",\" + dr + \" 1 0,1 \" + d.target.x + \",\" + d.target.y;\n          });\n        } else {\n          d3.selectAll(\".link\")\n          .data(this.links)\n          .attr(\"x1\", d => d.source.x)\n          .attr(\"y1\", d => d.source.y)\n          .attr(\"x2\", d => d.target.x)\n          .attr(\"y2\", d => d.target.y);\n        }\n        \n       \n      });\n    },\n\n    drag(simulation) {\n      function dragstarted(d) {\n        if (!d3.event.active) simulation.alphaTarget(0.2).restart();\n        d3.select(this).classed('fixed', d.fixed = true);\n        d.fx = d.x;\n        d.fy = d.y;\n      }\n\n      function dragged(d) {\n        d.fx = d3.event.x;\n        d.fy = d3.event.y;\n      }\n\n      function dragended(d) {\n        if (!d3.event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n      }\n\n      return d3\n        .drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended);\n    },\n  }\n};\n</script>\n\n<style>\n@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap');\n</style>\n\n<style scoped>\n.app {\n  display: inline-block;\n  position: relative;\n}\n\n.element {\n  transition: opacity 0.2s ease;\n}\n.selected {\n  opacity: 0.9 !important;\n}\n\n.node,\n.link {\n  cursor: pointer;\n}\n\n.btn-orange {\n  @apply transition duration-200 font-bold p-4 m-0 rounded inline-flex items-center \n        flex-grow-0 h-12 text-xl;\n  background-color: #FCB040;\n}\n\n.btn-orange:hover {\n  @apply text-white bg-red-700;\n}\n\n.header {\n  @apply text-center justify-between;\n}\n\n/* responsive, form small screens, use 13px font size */\n.sidebar-text {\n  @apply w-5/6 flex-auto rounded-md p-3 grid grid-cols-1 bg-orange-100;\n}\n\n.top-header, .font-tag, .sauces, .sub-header {\n  font-family: 'Gordita', 'IBM Plex Sans';\n}\n\n.btn {\n  @apply p-5;\n  border-radius: 50%;\n}\n\n.dot1 {\n  @apply mx-2;\n  height: 6px;\n  width: 6px;\n  background-color:#E4140F;\n  border-radius: 50%;\n  display: inline-block;\n}\n\n.dot2 {\n  height: 12px;\n  width: 12px;\n  background-color: #E4140F;\n  border-radius: 50%;\n  display: inline-block;\n}\n\n.rectangle1 {\n  height: 4px;\n  width: 30px;\n  opacity: 0.5;\n  display: inline-block;\n}\n\n.rectangle2 {\n  @apply mt-1;\n  height: 8px;\n  width: 30px;\n  opacity: 0.5;\n  display: inline-block;\n}\n\n@media only screen and (max-width: 600px) {\n  body {\n    background-color: lightblue;\n  }\n}\n</style>\n\n"]}]}